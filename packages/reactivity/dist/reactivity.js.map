{"version":3,"file":"reactivity.js","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["Reactive","activeEffects","targetMap","WeakMap","onChange","isSetting","actualState","undefined","getTrackableObject","obj","callbacks","key","outerThis","proxy","Proxy","get","target","receiver","result","Reflect","onGet","set","value","onSet","deleteProperty","onDeleteProperty","Array","isArray","Object","setPrototypeOf","prototype","track","length","depsMap","Map","dep","Set","forEach","effect","add","trigger","deps","watchEffect","push","pop","build","fireWhenUpdated","setTimeout","ref","raw","r","newVal","computed","getter","onStateChange"],"mappings":"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"}