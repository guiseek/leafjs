function e(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function t(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n}class n{constructor(){this.activeEffects=[],this.targetMap=new WeakMap,this.onChange=null}getTrackableObject(e,t){for(const n in e)"object"==typeof e[n]&&(e[n]=this.getTrackableObject(e[n],t));const n=this,r=new Proxy(e,{get(e,n,r){const s=Reflect.get(e,n,r);return t.onGet(e,n,r),s},set(e,r,s,a){"object"==typeof s&&(s=n.getTrackableObject(s,t));const o=Reflect.set(e,r,s,a);return t.onSet(e,r,s,a),n.onChange&&n.onChange(),o},deleteProperty(e,n){const r=Reflect.deleteProperty(e,n);return t.onDeleteProperty(e,n),r}});return Array.isArray(e)&&Object.setPrototypeOf(r,Array.prototype),r}track(e,t){if(!this.activeEffects.length)return;let n=this.targetMap.get(e);n||(n=new Map,this.targetMap.set(e,n));let r=n.get(t);r||(r=new Set,n.set(t,r)),this.activeEffects.forEach((e=>null==r?void 0:r.add(e)))}trigger(e,t){const n=this.targetMap.get(e);if(!n)return;const r=n.get(t);r&&r.forEach((e=>{e()}))}watchEffect(e){this.activeEffects.push(e),e(),this.activeEffects.pop()}build(e){const t=this;return this.getTrackableObject(e,{onGet(e,n){t.track(e,n)},onSet(e,n){t.trigger(e,n)},onDeleteProperty(){}})}ref(e){const t=this,n={get value(){return t.track(n,"value"),e},set value(r){r!==e&&(e=r,t.trigger(n,"value"))}};return n}computed(e){const t=this.ref(null);return this.watchEffect((()=>t.value=e())),t}onStateChange(e){this.onChange=e,e()}}var r,s,a,o;const i=e=>HTMLCollection.prototype.isPrototypeOf(e)||NodeList.prototype.isPrototypeOf(e)||Array.isArray(e),c=e=>void 0!==e.nodeType||"string"==typeof e||"number"==typeof e,l=(e,t)=>{if(i(t)){t=[...t].filter((e=>e));for(const n of t)e.append(n)}else e.append(t)},h=(e,t,n)=>{const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return n&&l(r,n),r},f=(e,t,n)=>void 0===t?h(e):c(t)||i(t)?h(e,{},t):h(e,t,n),d=(e,t)=>{if(i(e))for(const n of e)t(n);else t(e)};class u extends HTMLElement{constructor(){super(),r.add(this),s.set(this,null),a.set(this,null)}get state(){return e(this,s,"f")}set state(r){if(!e(this,s,"f"))return t(this,a,new n,"f"),void t(this,s,e(this,a,"f").build(r),"f");t(this,s,r,"f")}connectedCallback(){var t,n;const s=this.attachShadow({mode:"open"});let i=null;const c=f("style"),l=null!==(t=this.css)&&void 0!==t?t:e(this,r,"m",o);c.textContent=l(),s.appendChild(c);const h=()=>{i&&d(i,(e=>s.removeChild(e))),i=this.render(),d(i,(e=>s.appendChild(e)))};e(this,a,"f")?null===(n=e(this,a,"f"))||void 0===n||n.onStateChange(h):h()}render(){return this}css(){return""}}s=new WeakMap,a=new WeakMap,r=new WeakSet,o=function(){return""};const p=(e,t,n)=>{customElements.define(e,t,n)},m={className:"class"},g=[{name:"button",extends:HTMLButtonElement},{name:"div",extends:HTMLDivElement},{name:"input",extends:HTMLInputElement},{name:"h1",extends:HTMLHeadingElement},{name:"h2",extends:HTMLHeadingElement},{name:"h3",extends:HTMLHeadingElement},{name:"h4",extends:HTMLHeadingElement},{name:"h5",extends:HTMLHeadingElement},{name:"h6",extends:HTMLHeadingElement},{name:"p",extends:HTMLParagraphElement},{name:"li",extends:HTMLLIElement}],E={},w=e=>class extends e{constructor(e,t){if(super(),e)if(c(e)||i(e)){if(l(this,[...e]),t)for(const e in t)this.setAttribute(e in m?m[e]:e,t[e])}else for(const t in e)this.setAttribute(t in m?m[t]:t,e[t])}};g.forEach((e=>{E[e.name]=w(e.extends),p(`leaf-${e.name}`,E[e.name],{extends:e.name})}));export{E as HTMLElements,u as LeafComponent,l as appendContentToNode,f as createElement,c as isNodeLike,i as isNodeListLike,m as preservedProps,p as registerComponent,d as runCallbackOnElements};
//# sourceMappingURL=leaf.min.js.map
