"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return i=a()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&o(a,n.prototype),a},i.apply(null,arguments)}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return i(e,arguments,r(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),o(a,e)},u(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function p(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}Object.defineProperty(exports,"__esModule",{value:!0});var d,h={};function m(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function v(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}exports.Reactive=void 0,Object.defineProperty(h,"__esModule",{value:!0});var y=function(){function e(){this.activeEffects=[],this.targetMap=new WeakMap,this.onChange=null,d.set(this,!1)}var t=e.prototype;return t.getTrackableObject=function(e,t){for(var n in e)"object"==typeof e[n]&&(e[n]=this.getTrackableObject(e[n],t));var r=this,o=new Proxy(e,{get:function(e,n,r){var o=Reflect.get(e,n,r);return t.onGet(e,n,r),o},set:function(e,n,o,a){"object"==typeof o&&(o=r.getTrackableObject(o,t));var i=Reflect.set(e,n,o,a);return t.onSet(e,n,o,a),i},deleteProperty:function(e,n){var r=Reflect.deleteProperty(e,n);return t.onDeleteProperty(e,n),r}});return Array.isArray(e)&&Object.setPrototypeOf(o,Array.prototype),o},t.track=function(e,t){if(this.activeEffects.length){var n=this.targetMap.get(e);n||(n=new Map,this.targetMap.set(e,n));var r=n.get(t);r||(r=new Set,n.set(t,r)),this.activeEffects.forEach((function(e){return null==r?void 0:r.add(e)}))}},t.trigger=function(e,t){var n=this.targetMap.get(e);if(n){var r=n.get(t);r&&r.forEach((function(e){e()}))}},t.watchEffect=function(e){this.activeEffects.push(e),e(),this.activeEffects.pop()},t.build=function(e){var t=this,n=this,r=function e(){m(t,d,"f")?setTimeout(e,2):t.onChange&&t.onChange()};return this.getTrackableObject(e,{onGet:function(e,t){n.track(e,t)},onSet:function(e,t){m(n,d,"f")||(v(n,d,!0,"f"),r()),n.trigger(e,t),v(n,d,!1,"f")},onDeleteProperty:function(){}})},t.ref=function(e){var t=this,n={get value(){return t.track(n,"value"),e},set value(r){r!==e&&(e=r,t.trigger(n,"value"))}};return n},t.computed=function(e){var t=this.ref(null);return this.watchEffect((function(){return t.value=e()})),t},t.onStateChange=function(e){this.onChange=e,e()},e}();d=new WeakMap,exports.Reactive=h.Reactive=y;var b,E,g,w,T=function(e){return HTMLCollection.prototype.isPrototypeOf(e)||NodeList.prototype.isPrototypeOf(e)||Array.isArray(e)},x=function(e){return void 0!==e.nodeType||"string"==typeof e||"number"==typeof e},L={className:"class"},M=function e(t,n){if(T(n)){n=[].concat(n).filter((function(e){return!(!1===e||null==e)}));for(var r,o=f(n);!(r=o()).done;){var a=r.value;Array.isArray(a)?e(t,a):t.append(a)}}else t.append(n)},O=[{name:"button",extends:HTMLButtonElement},{name:"div",extends:HTMLDivElement},{name:"input",extends:HTMLInputElement},{name:"h1",extends:HTMLHeadingElement},{name:"h2",extends:HTMLHeadingElement},{name:"h3",extends:HTMLHeadingElement},{name:"h4",extends:HTMLHeadingElement},{name:"h5",extends:HTMLHeadingElement},{name:"h6",extends:HTMLHeadingElement},{name:"p",extends:HTMLParagraphElement},{name:"li",extends:HTMLLIElement},{name:"ul",extends:HTMLUListElement},{name:"ol",extends:HTMLOListElement},{name:"span",extends:HTMLSpanElement},{name:"form",extends:HTMLFormElement},{name:"label",extends:HTMLLabelElement},{name:"a",extends:HTMLAnchorElement},{name:"textarea",extends:HTMLTextAreaElement},{name:"iframe",extends:HTMLIFrameElement},{name:"img",extends:HTMLImageElement},{name:"video",extends:HTMLVideoElement}],A={},H={};O.forEach((function(e){H[e.name]=function(t,n){return S(e.name,t,n)},A[e.name]=function(e){function t(t,n){var r;if(r=e.call(this)||this,!t)return s(r);if(!x(t)&&!T(t)){for(var o in t)r.setAttribute(o in L?L[o]:o,t[o]);return s(r)}if(M(s(r),[].concat(t)),!n)return s(r);for(var a in n)r.setAttribute(a in L?L[a]:a,n[a]);return r}return n(t,e),t}(e.extends),customElements.define("leaf-__"+e.name,A[e.name],{extends:e.name})}));var C=new WeakMap,j=function(e,t){return e.startsWith("on")},P=function(e){return e.nodeType===Node.ELEMENT_NODE},N=function(e,n,r){if("string"!=typeof e)return new e(t({},n,{children:r}));var o=document.createElement(e),a=new Set;for(var i in n){var u=n[i];if(j(i)){var s=i.substring(2).toLowerCase();a.add({name:s,handler:u}),o.addEventListener(s,u)}else i in L?o.setAttribute(L[i],u):o.setAttribute(i,u)}return C.set(o,a),r&&M(o,r),o},S=function(e,t,n){return void 0===t?N(e):x(t)||T(t)?N(e,n,t):N(e,t)},_=function(e){if(C.has(e))return C.get(e)},k=function(e,t){C.set(e,t||new Set)},R=function(e){return C.delete(e)},D=function(e,t){e.forEach((function(e){t.appendChild(e)}))},I=function e(t,n,r,o){if(r){var a=t.length,i=n.length,u=Math.min(a,i),s=!1;if(P(r)&&P(o)){var c=_(r),l=_(o);null==c||c.forEach((function(e){r.removeEventListener(e.name,e.handler)})),null==l||l.forEach((function(e){r.addEventListener(e.name,e.handler)})),k(r,l),R(o);for(var p,d=r.attributes,h=f(o.attributes);!(p=h()).done;){var m=p.value;r.getAttribute(m.name)!==m.value&&r.setAttribute(m.name,m.value)}for(var v,y=f(d);!(v=y()).done;){var b=v.value;o.hasAttribute(b.name)||r.removeAttribute(b.name)}}for(var E=0;E<u;E++){var g=t[E],w=n[E];if(P(g)&&g.hasAttribute("leaf-preserve")&&(g=t[E+1],s=!0),P(g)&&P(w)&&g.tagName!==w.tagName){g.outerHTML=g.outerHTML.replace(new RegExp("<"+g.tagName.toLowerCase()+"(.*?)","g"),"<"+w.tagName.toLowerCase()+"$1").replace(new RegExp("</"+g.tagName.toLowerCase()+"(.*?)","g"),"</"+w.tagName.toLowerCase()+"$1");for(var T=0;null!==g;)T++,g=g.previousSibling;if(g=r.childNodes[T],!P(g))continue}if(g.nodeType!==Node.TEXT_NODE||w.nodeType!==Node.TEXT_NODE)e(Array.from(g.childNodes),Array.from(w.childNodes),g,w);else{if(g.textContent===w.textContent)continue;r.replaceChild(w,g)}}s&&a--,i>a?n.slice(a).forEach((function(e){e.nodeType!==Node.TEXT_NODE?D([e],r):r.appendChild(e)})):i<a&&t.slice(i).forEach((function(e,t){e.nodeType!==Node.TEXT_NODE?r.removeChild(e):r.removeChild(r.childNodes[t])}))}},W=function(t){function r(e){var n;return n=t.call(this)||this,b.add(s(n)),E.set(s(n),null),g.set(s(n),null),n}n(r,t);var o,a,i,u=r.prototype;return u.connectedCallback=function(){var e,t,n=this,r=this.attachShadow({mode:"closed"}),o=null,a=null,i=S("style"),u=null!==(e=this.css)&&void 0!==e?e:l(this,b,"m",w);i.textContent=u(),i.setAttribute("leaf-preserve","true"),r.appendChild(i);var s=function(){if(o=n.render(),Array.isArray(o)||(o=[o]),!a)return D(o,r),void(a=o);I(Array.from(r.childNodes),Array.from(o),r,o[0]),a=o};l(this,g,"f")?null===(t=l(this,g,"f"))||void 0===t||t.onStateChange(s):s()},u.render=function(){return this},u.css=function(){return""},o=r,(a=[{key:"state",get:function(){return l(this,E,"f")},set:function(e){if(!l(this,E,"f"))return p(this,g,new exports.Reactive,"f"),void p(this,E,l(this,g,"f").build(e),"f");p(this,E,e,"f")}}])&&e(o.prototype,a),i&&e(o,i),Object.defineProperty(o,"prototype",{writable:!1}),r}(u(HTMLElement));E=new WeakMap,g=new WeakMap,b=new WeakSet,w=function(){return""},exports.HTMLClassElements=A,exports.HTMLElements=H,exports.LeafComponent=W,exports.createElement=S,exports.createElementReactStyle=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return r?S(e,r,null!=t?t:{}):S(e,null!=t?t:{})},exports.deleteEventListenerOf=R,exports.eventListeners=C,exports.getEventListenerOf=_,exports.isElement=P,exports.isEventListener=j,exports.mountElements=D,exports.patchElements=I,exports.registerComponent=function(e,t,n){return customElements.define(e,t,n),function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i(t,[e].concat(r))}},exports.runCallbackOnElements=function e(t,n){if(T(t))for(var r,o=f(t);!(r=o()).done;){var a=r.value;Array.isArray(a)?e(a,n):n(a)}else n(t)},exports.setEventListenerOf=k;
//# sourceMappingURL=leaf.min.js.map
